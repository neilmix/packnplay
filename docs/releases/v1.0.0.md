# Release v1.0.0

## 🎉 First Stable Release

packnplay v1.0.0 marks the first stable release of our development container tool with comprehensive AI coding agent support, smart user detection, and Docker-compatible port mapping.

## What's New

This initial release provides a complete solution for running AI coding assistants in isolated Docker containers with intelligent automation and zero-configuration user management.

## ✨ Features Added

### Smart User Detection System
- **Automatic container user detection** - no more hardcoded assumptions
- **Intelligent caching** by Docker image ID for performance
- **Direct container interrogation** - asks `whoami && echo $HOME` instead of guessing
- **Universal compatibility** - works with node, ubuntu, python, custom images
- **devcontainer.json support** - respects `remoteUser` field when specified

### Docker-Compatible Port Mapping
- **Native `-p/--publish` syntax** - zero learning curve for Docker users
- **Multiple port support** - `-p 8080:3000 -p 9000:9001`
- **Full format compatibility**:
  - Basic: `8080:3000`
  - Host IP: `127.0.0.1:8080:3000`
  - Protocol: `8080:3000/tcp`, `5353:53/udp`
  - Combined: `127.0.0.1:8080:3000/tcp`

### Container Management
- **Automatic worktree management** in XDG-compliant locations
- **Dev container discovery** - uses `.devcontainer/devcontainer.json` or sensible defaults
- **Persistent containers** - containers stay running for fast reconnection
- **Clean lifecycle management** - proper container labeling and cleanup

### Credential Integration
- **Interactive first-run setup** with beautiful terminal UI
- **Secure credential mounting** - read-only mounts for security
- **macOS Keychain integration** - automatic credential extraction
- **Flexible per-invocation overrides** with credential flags

### Development Experience
- **Sandboxed execution** - isolated from host environment
- **Clean environment** - only safe variables passed through
- **Git integration** - proper worktree and repository handling
- **Multiple AI agents** - Claude Code, Codex, Gemini, Copilot, and more

## 🚀 Installation

```bash
# Install directly
go install github.com/obra/packnplay@latest

# Or build from source
git clone https://github.com/obra/packnplay.git
cd packnplay
go build -o packnplay
sudo mv packnplay /usr/local/bin/
```

## 📖 Usage Examples

### Basic Usage
```bash
# Run Claude Code with automatic worktree
packnplay run claude

# Run with port mapping for web development
packnplay run -p 8080:3000 npm start

# Run with multiple ports and credentials
packnplay run -p 8080:3000 -p 9000:9001 --all-creds npm dev
```

### Advanced Usage
```bash
# Specific worktree management
packnplay run --worktree=feature-auth claude

# Custom environment and port binding
packnplay run -p 127.0.0.1:8080:3000 --env DEBUG=1 npm dev

# Container lifecycle management
packnplay list                    # List running containers
packnplay attach --worktree=auth  # Attach to running container
packnplay stop --all              # Stop all containers
```

## 🏗️ Architecture Highlights

- **Test-driven development** - comprehensive test coverage with TDD methodology
- **User detection caching** - performance optimized with XDG-compliant cache storage
- **Standards compliance** - follows Docker and devcontainer.json conventions
- **Modular design** - clean separation of concerns for maintainability

## 🔧 Technical Details

### User Detection Priority
1. devcontainer.json `remoteUser` field (explicit configuration)
2. Cache lookup by Docker image ID (performance)
3. Runtime detection via container interrogation (reliability)
4. Safe fallback to root user (compatibility)

### Port Mapping Integration
- Seamless integration with Docker run arguments
- Full Docker syntax compatibility
- Support for IP binding and protocol specification
- Multiple port mapping support

## 🧪 Quality Assurance

- **100+ tests** covering all major functionality
- **Integration tests** for end-to-end workflows
- **Docker compatibility** verified across multiple image types
- **Performance testing** for user detection caching

## 🎯 Use Cases

### Web Development
```bash
# React development with hot reload
packnplay run -p 3000:3000 npm start

# Full stack development
packnplay run -p 8080:3000 -p 5432:5432 npm dev
```

### AI-Assisted Development
```bash
# Claude Code for AI pair programming
packnplay run --all-creds claude

# Multiple AI tools with shared environment
packnplay run --worktree=feature claude
packnplay attach --worktree=feature  # Access same environment
```

### Container Development
```bash
# Custom devcontainer with user detection
# (automatically detects correct user for any image)
packnplay run --no-worktree bash

# Test different container environments
packnplay run --worktree=test-node node:18 node --version
packnplay run --worktree=test-python python:3.11 python --version
```

## 🙏 Thanks

Special recognition to:
- **Jesse Drelick** - Vision, architecture, and core development
- **Dan Shapiro** - Hero image contribution
- **Community contributors** - Feature requests and bug reports

## 📚 Documentation

- **[README.md](../../README.md)** - Complete usage guide
- **[Release Engineering](../release-engineering.md)** - Development process
- **[.devcontainer/README.md](../../.devcontainer/README.md)** - Container development

## 🐛 Known Issues

- Apple Container runtime disabled due to compatibility issues (use Docker Desktop)
- First container start may be slower due to user detection (subsequent starts are cached)

## 🔮 What's Next

This stable foundation enables future enhancements:
- Enhanced container runtimes support
- Additional AI agent integrations
- Advanced networking features
- Performance optimizations

## 📝 Changelog

See [CHANGELOG.md](../../CHANGELOG.md) for detailed version history.

---

**Full Changelog**: This is the first release - all features are new!
**Docker Hub**: Container images available at `ghcr.io/obra/packnplay-default`
**GitHub**: https://github.com/obra/packnplay